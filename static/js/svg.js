!function(h,l){"function"==typeof define&&define.amd?define(function(){return l(h,h.document)}):"object"==typeof exports?module.exports=h.document?l(h,h.document):function(h){return l(h,h.document)}:h.SVG=l(h,h.document)}("undefined"!=typeof window?window:this,function(h,l){function F(a,c,d,e){return d+e.replace(b.regex.dots," .")}function D(a){a=a.slice(0);for(var c=a.length;c--;)Array.isArray(a[c])&&(a[c]=D(a[c]));return a}function E(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}
function x(a){return a.charAt(0).toUpperCase()+a.slice(1)}function G(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function z(a){a=a.toString(16);return 1==a.length?"0"+a:a}function t(a,c,b){if(null==c||null==b)a=a.bbox(),null==c?c=a.width/a.height*b:null==b&&(b=a.height/a.width*c);return{width:c,height:b}}function u(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function H(a){return a instanceof b.Matrix||
(a=new b.Matrix(a)),a}function p(a,c){a.cx=null==a.cx?c.bbox().cx:a.cx;a.cy=null==a.cy?c.bbox().cy:a.cy}function A(a){for(var c=a.childNodes.length-1;0<=c;c--)a.childNodes[c]instanceof h.SVGElement&&A(a.childNodes[c]);return b.adopt(a).id(b.eid(a.nodeName))}function B(a){return null==a.x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2,a}function I(a){if(a=(a||"").toString().match(b.regex.reference))return a[1]}
function q(a){return 1E-37<Math.abs(a)?a:0}var b=(void 0!==this?this:h).SVG=function(a){if(b.supported)return a=new b.Doc(a),b.parser.draw||b.prepare(),a};if(b.ns="http://www.w3.org/2000/svg",b.xmlns="http://www.w3.org/2000/xmlns/",b.xlink="http://www.w3.org/1999/xlink",b.svgjs="http://svgjs.com/svgjs",b.supported=!!l.createElementNS&&!!l.createElementNS(b.ns,"svg").createSVGRect,!b.supported)return!1;b.did=1E3;b.eid=function(a){return"Svgjs"+x(a)+b.did++};b.create=function(a){var c=l.createElementNS(this.ns,
a);return c.setAttribute("id",this.eid(a)),c};b.extend=function(){var a,c,d=[].slice.call(arguments),e=d.pop();for(c=d.length-1;0<=c;c--)if(d[c])for(a in e)d[c].prototype[a]=e[a];b.Set&&b.Set.inherit&&b.Set.inherit()};b.invent=function(a){var c="function"==typeof a.create?a.create:function(){this.constructor.call(this,b.create(a.create))};return a.inherit&&(c.prototype=new a.inherit),a.extend&&b.extend(c,a.extend),a.construct&&b.extend(a.parent||b.Container,a.construct),c};b.adopt=function(a){if(!a)return null;
if(a.instance)return a.instance;var c;return c="svg"==a.nodeName?a.parentNode instanceof h.SVGElement?new b.Nested:new b.Doc:"linearGradient"==a.nodeName?new b.Gradient("linear"):"radialGradient"==a.nodeName?new b.Gradient("radial"):b[x(a.nodeName)]?new (b[x(a.nodeName)]):new b.Element(a),c.type=a.nodeName,c.node=a,a.instance=c,c instanceof b.Doc&&c.namespace().defs(),c.setData(JSON.parse(a.getAttribute("svgjs:data"))||{}),c};b.prepare=function(){var a=l.getElementsByTagName("body")[0],c=(a?new b.Doc(a):
b.adopt(l.documentElement).nested()).size(2,0);b.parser={body:a||l.documentElement,draw:c.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:c.polyline().node,path:c.path().node,"native":b.create("svg")}};b.parser={"native":b.create("svg")};l.addEventListener("DOMContentLoaded",function(){b.parser.draw||b.prepare()},!1);b.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g};b.utils={map:function(a,
c){var b,e=a.length,f=[];for(b=0;b<e;b++)f.push(c(a[b]));return f},filter:function(a,c){var b,e=a.length,f=[];for(b=0;b<e;b++)c(a[b])&&f.push(a[b]);return f},radians:function(a){return a%360*Math.PI/180},degrees:function(a){return 180*a/Math.PI%360},filterSVGElements:function(a){return this.filter(a,function(a){return a instanceof h.SVGElement})}};b.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",
opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}};b.Color=function(a){var c;this.b=this.g=this.r=0;a&&("string"==typeof a?b.regex.isRgb.test(a)?(c=b.regex.rgb.exec(a.replace(b.regex.whitespace,"")),this.r=parseInt(c[1]),this.g=parseInt(c[2]),this.b=parseInt(c[3])):b.regex.isHex.test(a)&&(c=b.regex.hex.exec(G(a)),this.r=parseInt(c[1],16),this.g=parseInt(c[2],
16),this.b=parseInt(c[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b))};b.extend(b.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+z(this.r)+z(this.g)+z(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new b.Color(a),this},at:function(a){return this.destination?(a=0>a?0:1<a?1:a,new b.Color({r:~~(this.r+(this.destination.r-
this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}});b.Color.test=function(a){return a+="",b.regex.isHex.test(a)||b.regex.isRgb.test(a)};b.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b};b.Color.isColor=function(a){return b.Color.isRgb(a)||b.Color.test(a)};b.Array=function(a,c){a=(a||[]).valueOf();0==a.length&&c&&(a=c.valueOf());this.value=this.parse(a)};b.extend(b.Array,{morph:function(a){if(this.destination=
this.parse(a),this.value.length!=this.destination.length){a=this.value[this.value.length-1];for(var c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(a)}return this},settle:function(){for(var a=0,c=this.value.length,b=[];a<c;a++)-1==b.indexOf(this.value[a])&&b.push(this.value[a]);return this.value=b},at:function(a){if(!this.destination)return this;for(var c=0,d=this.value.length,
e=[];c<d;c++)e.push(this.value[c]+(this.destination[c]-this.value[c])*a);return new b.Array(e)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.trim().split(b.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var a=new this.constructor;return a.value=D(this.value),a}});b.PointArray=function(a,c){b.Array.call(this,
a,c||[[0,0]])};b.PointArray.prototype=new b.Array;b.PointArray.prototype.constructor=b.PointArray;b.extend(b.PointArray,{toString:function(){for(var a=0,c=this.value.length,b=[];a<c;a++)b.push(this.value[a].join(","));return b.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var c=0,d=this.value.length,e=[];c<d;c++)e.push([this.value[c][0]+(this.destination[c][0]-this.value[c][0])*
a,this.value[c][1]+(this.destination[c][1]-this.value[c][1])*a]);return new b.PointArray(e)},parse:function(a){var c=[];if(a=a.valueOf(),Array.isArray(a)){if(Array.isArray(a[0]))return a.map(function(a){return a.slice()});if(null!=a[0].x)return a.map(function(a){return[a.x,a.y]})}else a=a.trim().split(b.regex.delimiter).map(parseFloat);0!=a.length%2&&a.pop();for(var d=0,e=a.length;d<e;d+=2)c.push([a[d],a[d+1]]);return c},move:function(a,c){var b=this.bbox();if(a-=b.x,c-=b.y,!isNaN(a)&&!isNaN(c))for(b=
this.value.length-1;0<=b;b--)this.value[b]=[this.value[b][0]+a,this.value[b][1]+c];return this},size:function(a,c){var b,e=this.bbox();for(b=this.value.length-1;0<=b;b--)e.width&&(this.value[b][0]=(this.value[b][0]-e.x)*a/e.width+e.x),e.height&&(this.value[b][1]=(this.value[b][1]-e.y)*c/e.height+e.y);return this},bbox:function(){return b.parser.poly.setAttribute("points",this.toString()),b.parser.poly.getBBox()}});for(var C={M:function(a,c,b){return c.x=b.x=a[0],c.y=b.y=a[1],["M",c.x,c.y]},L:function(a,
c){return c.x=a[0],c.y=a[1],["L",a[0],a[1]]},H:function(a,c){return c.x=a[0],["H",a[0]]},V:function(a,c){return c.y=a[0],["V",a[0]]},C:function(a,c){return c.x=a[4],c.y=a[5],["C",a[0],a[1],a[2],a[3],a[4],a[5]]},S:function(a,c){return c.x=a[2],c.y=a[3],["S",a[0],a[1],a[2],a[3]]},Q:function(a,c){return c.x=a[2],c.y=a[3],["Q",a[0],a[1],a[2],a[3]]},T:function(a,c){return c.x=a[0],c.y=a[1],["T",a[0],a[1]]},Z:function(a,c,b){return c.x=b.x,c.y=b.y,["Z"]},A:function(a,c){return c.x=a[5],c.y=a[6],["A",a[0],
a[1],a[2],a[3],a[4],a[5],a[6]]}},r="mlhvqtcsaz".split(""),y=0,J=r.length;y<J;++y)C[r[y]]=function(a){return function(c,b,e){if("H"==a)c[0]+=b.x;else if("V"==a)c[0]+=b.y;else if("A"==a)c[5]+=b.x,c[6]+=b.y;else for(var d=0,g=c.length;d<g;++d)c[d]+=d%2?b.y:b.x;return C[a](c,b,e)}}(r[y].toUpperCase());b.PathArray=function(a,c){b.Array.call(this,a,c||[["M",0,0]])};b.PathArray.prototype=new b.Array;b.PathArray.prototype.constructor=b.PathArray;b.extend(b.PathArray,{toString:function(){for(var a=this.value,
c=0,b=a.length,e="";c<b;c++)e+=a[c][0],null!=a[c][1]&&(e+=a[c][1],null!=a[c][2]&&(e+=" ",e+=a[c][2],null!=a[c][3]&&(e+=" ",e+=a[c][3],e+=" ",e+=a[c][4],null!=a[c][5]&&(e+=" ",e+=a[c][5],e+=" ",e+=a[c][6],null!=a[c][7]&&(e+=" ",e+=a[c][7])))));return e+" "},move:function(a,c){var b=this.bbox();if(a-=b.x,c-=b.y,!isNaN(a)&&!isNaN(c))for(var e=this.value.length-1;0<=e;e--)b=this.value[e][0],"M"==b||"L"==b||"T"==b?(this.value[e][1]+=a,this.value[e][2]+=c):"H"==b?this.value[e][1]+=a:"V"==b?this.value[e][1]+=
c:"C"==b||"S"==b||"Q"==b?(this.value[e][1]+=a,this.value[e][2]+=c,this.value[e][3]+=a,this.value[e][4]+=c,"C"==b&&(this.value[e][5]+=a,this.value[e][6]+=c)):"A"==b&&(this.value[e][6]+=a,this.value[e][7]+=c);return this},size:function(a,c){var b,e=this.bbox();for(b=this.value.length-1;0<=b;b--){var f=this.value[b][0];"M"==f||"L"==f||"T"==f?(this.value[b][1]=(this.value[b][1]-e.x)*a/e.width+e.x,this.value[b][2]=(this.value[b][2]-e.y)*c/e.height+e.y):"H"==f?this.value[b][1]=(this.value[b][1]-e.x)*a/
e.width+e.x:"V"==f?this.value[b][1]=(this.value[b][1]-e.y)*c/e.height+e.y:"C"==f||"S"==f||"Q"==f?(this.value[b][1]=(this.value[b][1]-e.x)*a/e.width+e.x,this.value[b][2]=(this.value[b][2]-e.y)*c/e.height+e.y,this.value[b][3]=(this.value[b][3]-e.x)*a/e.width+e.x,this.value[b][4]=(this.value[b][4]-e.y)*c/e.height+e.y,"C"==f&&(this.value[b][5]=(this.value[b][5]-e.x)*a/e.width+e.x,this.value[b][6]=(this.value[b][6]-e.y)*c/e.height+e.y)):"A"==f&&(this.value[b][1]=this.value[b][1]*a/e.width,this.value[b][2]=
this.value[b][2]*c/e.height,this.value[b][6]=(this.value[b][6]-e.x)*a/e.width+e.x,this.value[b][7]=(this.value[b][7]-e.y)*c/e.height+e.y)}return this},equalCommands:function(a){var c;a=new b.PathArray(a);var d=this.value.length===a.value.length,e=0;for(c=this.value.length;d&&e<c;e++)d=this.value[e][0]===a.value[e][0];return d},morph:function(a){return a=new b.PathArray(a),this.equalCommands(a)?this.destination=a:this.destination=null,this},at:function(a){if(!this.destination)return this;var c,d,e=
this.value,f=this.destination.value,g=[],k=new b.PathArray,m=0;for(c=e.length;m<c;m++){g[m]=[e[m][0]];var h=1;for(d=e[m].length;h<d;h++)g[m][h]=e[m][h]+(f[m][h]-e[m][h])*a;"A"===g[m][0]&&(g[m][4]=+(0!=g[m][4]),g[m][5]=+(0!=g[m][5]))}return k.value=g,k},parse:function(a){if(a instanceof b.PathArray)return a.valueOf();var c,d={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};a="string"==typeof a?a.replace(b.regex.numbersWithDots,F).replace(b.regex.pathLetters," $& ").replace(b.regex.hyphen,"$1 -").trim().split(b.regex.delimiter):
a.reduce(function(a,b){return[].concat.call(a,b)},[]);var e=[],f=new b.Point,g=new b.Point,k=0,m=a.length;do b.regex.isPathLetter.test(a[k])?(c=a[k],++k):"M"==c?c="L":"m"==c&&(c="l"),e.push(C[c].call(null,a.slice(k,k+=d[c.toUpperCase()]).map(parseFloat),f,g));while(m>k);return e},bbox:function(){return b.parser.path.setAttribute("d",this.toString()),b.parser.path.getBBox()}});b.Number=b.invent({create:function(a,c){this.value=0;this.unit=c||"";"number"==typeof a?this.value=isNaN(a)?0:isFinite(a)?
a:0>a?-3.4E38:3.4E38:"string"==typeof a?(c=a.match(b.regex.numberAndUnit))&&(this.value=parseFloat(c[1]),"%"==c[5]?this.value/=100:"s"==c[5]&&(this.value*=1E3),this.unit=c[5]):a instanceof b.Number&&(this.value=a.valueOf(),this.unit=a.unit)},extend:{toString:function(){return("%"==this.unit?~~(1E8*this.value)/1E6:"s"==this.unit?this.value/1E3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(a){return a=new b.Number(a),new b.Number(this+
a,this.unit||a.unit)},minus:function(a){return a=new b.Number(a),new b.Number(this-a,this.unit||a.unit)},times:function(a){return a=new b.Number(a),new b.Number(this*a,this.unit||a.unit)},divide:function(a){return a=new b.Number(a),new b.Number(this/a,this.unit||a.unit)},to:function(a){var c=new b.Number(this);return"string"==typeof a&&(c.unit=a),c},morph:function(a){return this.destination=new b.Number(a),a.relative&&(this.destination.value+=this.value),this},at:function(a){return this.destination?
(new b.Number(this.destination)).minus(this).times(a).plus(this):this}}});b.Element=b.invent({create:function(a){this._stroke=b.defaults.attrs.stroke;this._event=null;this._events={};this.dom={};(this.node=a)&&(this.type=a.nodeName,this.node.instance=this,this._events=a._events||{},this._stroke=a.getAttribute("stroke")||this._stroke)},extend:{x:function(a){return this.attr("x",a)},y:function(a){return this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},
cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,c){var d=t(this,a,c);return this.width(new b.Number(d.width)).height(new b.Number(d.height))},clone:function(a){this.writeDataToDom();var b=A(this.node.cloneNode(!0));return a?a.add(b):this.after(b),b},remove:function(){return this.parent()&&
this.parent().removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},id:function(a){return this.attr("id",a)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},
classes:function(){var a=this.attr("class");return null==a?[]:a.trim().split(b.regex.delimiter)},hasClass:function(a){return-1!=this.classes().indexOf(a)},addClass:function(a){if(!this.hasClass(a)){var b=this.classes();b.push(a);this.attr("class",b.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter(function(b){return b!=a}).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},reference:function(a){return b.get(this.attr(a))},
parent:function(a){var c=this;if(!c.node.parentNode)return null;if(c=b.adopt(c.node.parentNode),!a)return c;for(;c&&c.node instanceof h.SVGElement;){if("string"==typeof a?c.matches(a):c instanceof a)return c;if(!c.node.parentNode||"#document"==c.node.parentNode.nodeName||"#document-fragment"==c.node.parentNode.nodeName)return null;c=b.adopt(c.node.parentNode)}},doc:function(){return this instanceof b.Doc?this:this.parent(b.Doc)},parents:function(a){var b=[],d=this;do{if(!(d=d.parent(a))||!d.node)break;
b.push(d)}while(d.parent);return b},matches:function(a){var b=this.node;return(b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector).call(b,a)},"native":function(){return this.node},svg:function(a){var c=l.createElement("svg");if(!(a&&this instanceof b.Parent))return c.appendChild(a=l.createElement("svg")),this.writeDataToDom(),a.appendChild(this.node.cloneNode(!0)),c.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");c.innerHTML=
"<svg>"+a.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";a=0;for(var d=c.firstChild.childNodes.length;a<d;a++)this.node.appendChild(c.firstChild.firstChild);return this},writeDataToDom:function(){(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()});return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(a){return this.dom=a,
this},is:function(a){return this instanceof a}}});b.easing={"-":function(a){return a},"<>":function(a){return-Math.cos(a*Math.PI)/2+.5},">":function(a){return Math.sin(a*Math.PI/2)},"<":function(a){return 1-Math.cos(a*Math.PI/2)}};b.morph=function(a){return function(c,d){return(new b.MorphObj(c,d)).at(a)}};b.Situation=b.invent({create:function(a){this.reversing=this.reversed=this.init=!1;this.duration=(new b.Number(a.duration)).valueOf();this.delay=(new b.Number(a.delay)).valueOf();this.start=+new Date+
this.delay;this.finish=this.start+this.duration;this.ease=a.ease;this.loop=0;this.loops=!1;this.animations={};this.attrs={};this.styles={};this.transforms=[];this.once={}}});b.FX=b.invent({create:function(a){this._target=a;this.situations=[];this.active=!1;this.situation=null;this.paused=!1;this.absPos=this.pos=this.lastPos=0;this._speed=1},extend:{animate:function(a,c,d){"object"==typeof a&&(c=a.ease,d=a.delay,a=a.duration);a=new b.Situation({duration:a||1E3,delay:d||0,ease:b.easing[c||"-"]||c});
return this.queue(a),this},delay:function(a){a=new b.Situation({duration:a,delay:0,ease:b.easing["-"]});return this.queue(a)},target:function(a){return a&&a instanceof b.Element?(this._target=a,this):this._target},timeToAbsPos:function(a){return(a-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(a){return this.situation.duration/this._speed*a+this.situation.start},startAnimFrame:function(){this.stopAnimFrame();this.animationFrame=h.requestAnimationFrame(function(){this.step()}.bind(this))},
stopAnimFrame:function(){h.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(a){return("function"==typeof a||a instanceof b.Situation)&&this.situations.push(a),this.situation||(this.situation=this.situations.shift()),
this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof b.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var a,c,d=this.situation;if(d.init)return this;for(a in d.animations){var e=this.target()[a]();Array.isArray(e)||(e=[e]);Array.isArray(d.animations[a])||(d.animations[a]=[d.animations[a]]);for(c=e.length;c--;)d.animations[a][c]instanceof b.Number&&(e[c]=new b.Number(e[c])),d.animations[a][c]=
e[c].morph(d.animations[a][c])}for(a in d.attrs)d.attrs[a]=new b.MorphObj(this.target().attr(a),d.attrs[a]);for(a in d.styles)d.styles[a]=new b.MorphObj(this.target().style(a),d.styles[a]);return d.initialTransformation=this.target().matrixify(),d.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(a,b){var c=this.active;return this.active=!1,b&&this.clearQueue(),a&&this.situation&&(!c&&this.startCurrent(),this.atEnd()),
this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var a=this.situation;this.stop();this.situation=a;this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,
!0)},at:function(a,b){var c=this.situation.duration/this._speed;return this.absPos=a,b||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*c,this.situation.finish=this.situation.start+c,this.step(!0)},speed:function(a){return 0===a?this.pause():a?(this._speed=a,this.at(this.absPos,!0)):this._speed},loop:function(a,b){var c=this.last();return c.loops=null==a||a,c.loop=0,b&&(c.reversing=!0),this},pause:function(){return this.paused=
!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(a){var b=this.last();return b.reversed=void 0===a?!b.reversed:a,this},progress:function(a){return a?this.situation.ease(this.pos):this.pos},after:function(a){var b=this.last();return this.target().on("finished.fx",function f(c){c.detail.situation==b&&(a.call(this,b),this.off("finished.fx",f))}),this._callStart()},during:function(a){var c=this.last(),d=function(d){d.detail.situation==
c&&a.call(this,d.detail.pos,b.morph(d.detail.pos),d.detail.eased,c)};return this.target().off("during.fx",d).on("during.fx",d),this.after(function(){this.off("during.fx",d)}),this._callStart()},afterAll:function(a){var b=function f(b){a.call(this);this.off("allfinished.fx",f)};return this.target().off("allfinished.fx",b).on("allfinished.fx",b),this._callStart()},duringAll:function(a){var c=function(c){a.call(this,c.detail.pos,b.morph(c.detail.pos),c.detail.eased,c.detail.situation)};return this.target().off("during.fx",
c).on("during.fx",c),this.afterAll(function(){this.off("during.fx",c)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(a,b,d){return this.last()[d||"animations"][a]=b,this._callStart()},step:function(a){if(a||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops){var b;a=Math.max(this.absPos,0);var d=Math.floor(a);!0===this.situation.loops||d<this.situation.loops?(this.pos=a-d,b=this.situation.loop,
this.situation.loop=d):(this.absPos=this.situation.loops,this.pos=1,b=this.situation.loop-1,this.situation.loop=this.situation.loops);this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-b)%2))}else this.pos=this.absPos=Math.min(this.absPos,1);0>this.pos&&(this.pos=0);this.situation.reversed&&(this.pos=1-this.pos);b=this.situation.ease(this.pos);for(var e in this.situation.once)e>this.lastPos&&e<=b&&(this.situation.once[e].call(this.target(),this.pos,
b),delete this.situation.once[e]);return this.active&&this.target().fire("during",{pos:this.pos,eased:b,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):
!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=b,this):this},eachAt:function(){var a,c=this,d=this.target(),e=this.situation;for(g in e.animations){var f=[].concat(e.animations[g]).map(function(a){return"string"!=typeof a&&a.at?a.at(e.ease(c.pos),c.pos):a});d[g].apply(d,f)}for(g in e.attrs)f=[g].concat(e.attrs[g]).map(function(a){return"string"!=typeof a&&a.at?a.at(e.ease(c.pos),c.pos):a}),d.attr.apply(d,f);for(g in e.styles)f=[g].concat(e.styles[g]).map(function(a){return"string"!=
typeof a&&a.at?a.at(e.ease(c.pos),c.pos):a}),d.style.apply(d,f);if(e.transforms.length){f=e.initialTransformation;var g=0;for(a=e.transforms.length;g<a;g++){var k=e.transforms[g];k instanceof b.Matrix?f=k.relative?f.multiply((new b.Matrix).morph(k).at(e.ease(this.pos))):f.morph(k).at(e.ease(this.pos)):(k.relative||k.undo(f.extract()),f=f.multiply(k.at(e.ease(this.pos))))}d.matrix(f)}return this},once:function(a,b,d){var c=this.last();return d||(a=c.ease(a)),c.once[a]=b,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),
0),this}},parent:b.Element,construct:{animate:function(a,c,d){return(this.fx||(this.fx=new b.FX(this))).animate(a,c,d)},delay:function(a){return(this.fx||(this.fx=new b.FX(this))).delay(a)},stop:function(a,b){return this.fx&&this.fx.stop(a,b),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(a){if(this.fx){if(null==a)return this.fx.speed();this.fx.speed(a)}return this}}});
b.MorphObj=b.invent({create:function(a,c){return b.Color.isColor(c)?(new b.Color(a)).morph(c):b.regex.delimiter.test(a)?b.regex.pathLetters.test(a)?(new b.PathArray(a)).morph(c):(new b.Array(a)).morph(c):b.regex.numberAndUnit.test(c)?(new b.Number(a)).morph(c):(this.value=a,void(this.destination=c))},extend:{at:function(a,b){return 1>b?this.value:this.destination},valueOf:function(){return this.value}}});b.extend(b.FX,{attr:function(a,b,d){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else this.add(a,
b,"attrs");return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.add(a,b,"styles");return this},x:function(a,c){if(this.target()instanceof b.G)return this.transform({x:a},c),this;var d=new b.Number(a);return d.relative=c,this.add("x",d)},y:function(a,c){if(this.target()instanceof b.G)return this.transform({y:a},c),this;var d=new b.Number(a);return d.relative=c,this.add("y",d)},cx:function(a){return this.add("cx",new b.Number(a))},cy:function(a){return this.add("cy",
new b.Number(a))},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,c){if(this.target()instanceof b.Text)this.attr("font-size",a);else{var d;a&&c||(d=this.target().bbox());a||(a=d.width/d.height*c);c||(c=d.height/d.width*a);this.add("width",new b.Number(a)).add("height",new b.Number(c))}return this},width:function(a){return this.add("width",new b.Number(a))},height:function(a){return this.add("height",new b.Number(a))},plot:function(a,b,d,e){return 4==
arguments.length?this.plot([a,b,d,e]):this.add("plot",new (this.target().morphArray)(a))},leading:function(a){return this.target().leading?this.add("leading",new b.Number(a)):this},viewbox:function(a,c,d,e){return this.target()instanceof b.Container&&this.add("viewbox",new b.ViewBox(a,c,d,e)),this},update:function(a,c,d){if(this.target()instanceof b.Stop){if("number"==typeof a||a instanceof b.Number)return this.update({offset:a,color:c,opacity:d});null!=a.opacity&&this.attr("stop-opacity",a.opacity);
null!=a.color&&this.attr("stop-color",a.color);null!=a.offset&&this.attr("offset",a.offset)}return this}});b.Box=b.invent({create:function(a,c,d,e){if(!("object"!=typeof a||a instanceof b.Element))return b.Box.call(this,null!=a.left?a.left:a.x,null!=a.top?a.top:a.y,a.width,a.height);4==arguments.length&&(this.x=a,this.y=c,this.width=d,this.height=e);B(this)},extend:{merge:function(a){var b=new this.constructor;return b.x=Math.min(this.x,a.x),b.y=Math.min(this.y,a.y),b.width=Math.max(this.x+this.width,
a.x+a.width)-b.x,b.height=Math.max(this.y+this.height,a.y+a.height)-b.y,B(b)},transform:function(a){var c,d=1/0,e=-1/0,f=1/0,g=-1/0;return[new b.Point(this.x,this.y),new b.Point(this.x2,this.y),new b.Point(this.x,this.y2),new b.Point(this.x2,this.y2)].forEach(function(b){b=b.transform(a);d=Math.min(d,b.x);e=Math.max(e,b.x);f=Math.min(f,b.y);g=Math.max(g,b.y)}),c=new this.constructor,c.x=d,c.width=e-d,c.y=f,c.height=g-f,B(c),c}}});b.BBox=b.invent({create:function(a){if(b.Box.apply(this,[].slice.call(arguments)),
a instanceof b.Element){try{if(l.documentElement.contains){if(!l.documentElement.contains(a.node))throw new Exception("Element not in the dom");}else{for(var c=a.node;c.parentNode;)c=c.parentNode;if(c!=l)throw new Exception("Element not in the dom");}var d=a.node.getBBox()}catch(e){a instanceof b.Shape?(c=a.clone(b.parser.draw.instance).show(),d=c.node.getBBox(),c.remove()):d={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}b.Box.call(this,d)}},inherit:b.Box,
parent:b.Element,construct:{bbox:function(){return new b.BBox(this)}}});b.BBox.prototype.constructor=b.BBox;b.extend(b.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}});b.RBox=b.invent({create:function(a){b.Box.apply(this,[].slice.call(arguments));a instanceof b.Element&&b.Box.call(this,a.node.getBoundingClientRect())},inherit:b.Box,parent:b.Element,extend:{addOffset:function(){return this.x+=h.pageXOffset,this.y+=
h.pageYOffset,this}},construct:{rbox:function(a){return a?(new b.RBox(this)).transform(a.screenCTM().inverse()):(new b.RBox(this)).addOffset()}}});b.RBox.prototype.constructor=b.RBox;b.Matrix=b.invent({create:function(a){var c,d=u([1,0,0,1,0,0]);a=a instanceof b.Element?a.matrixify():"string"==typeof a?u(a.split(b.regex.delimiter).map(parseFloat)):6==arguments.length?u([].slice.call(arguments)):Array.isArray(a)?u(a):"object"==typeof a?a:d;for(c=n.length-1;0<=c;--c)this[n[c]]=null!=a[n[c]]?a[n[c]]:
d[n[c]]},extend:{extract:function(){var a=180/Math.PI*Math.atan2(0*this.b+1*this.d,0*this.a+1*this.c)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(a*Math.PI/180)+this.f*Math.sin(a*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(a*Math.PI/180)+this.e*Math.sin(-a*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-a,skewY:180/Math.PI*Math.atan2(1*this.b+0*this.d,1*this.a+0*this.c),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*
this.c+this.d*this.d),rotation:a,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new b.Matrix(this)}},clone:function(){return new b.Matrix(this)},morph:function(a){return this.destination=new b.Matrix(a),this},at:function(a){return this.destination?new b.Matrix({a:this.a+(this.destination.a-this.a)*a,b:this.b+(this.destination.b-this.b)*a,c:this.c+(this.destination.c-this.c)*a,d:this.d+(this.destination.d-this.d)*a,e:this.e+(this.destination.e-this.e)*a,f:this.f+(this.destination.f-this.f)*
a}):this},multiply:function(a){return new b.Matrix(this["native"]().multiply(H(a)["native"]()))},inverse:function(){return new b.Matrix(this["native"]().inverse())},translate:function(a,c){return new b.Matrix(this["native"]().translate(a||0,c||0))},scale:function(a,c,d,e){return 1==arguments.length?c=a:3==arguments.length&&(e=d,d=c,c=a),this.around(d,e,new b.Matrix(a,0,0,c,0,0))},rotate:function(a,c,d){return a=b.utils.radians(a),this.around(c,d,new b.Matrix(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),
0,0))},flip:function(a,b){return"x"==a?this.scale(-1,1,b,0):"y"==a?this.scale(1,-1,0,b):this.scale(-1,-1,a,null!=b?b:a)},skew:function(a,c,d,e){return 1==arguments.length?c=a:3==arguments.length&&(e=d,d=c,c=a),a=b.utils.radians(a),c=b.utils.radians(c),this.around(d,e,new b.Matrix(1,Math.tan(c),Math.tan(a),1,0,0))},skewX:function(a,b,d){return this.skew(a,0,b,d)},skewY:function(a,b,d){return this.skew(0,a,b,d)},around:function(a,c,d){return this.multiply(new b.Matrix(1,0,0,1,a||0,c||0)).multiply(d).multiply(new b.Matrix(1,
0,0,1,-a||0,-c||0))},"native":function(){for(var a=b.parser["native"].createSVGMatrix(),c=n.length-1;0<=c;c--)a[n[c]]=this[n[c]];return a},toString:function(){return"matrix("+q(this.a)+","+q(this.b)+","+q(this.c)+","+q(this.d)+","+q(this.e)+","+q(this.f)+")"}},parent:b.Element,construct:{ctm:function(){return new b.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof b.Nested){var a=this.rect(1,1),c=a.node.getScreenCTM();return a.remove(),new b.Matrix(c)}return new b.Matrix(this.node.getScreenCTM())}}});
b.Point=b.invent({create:function(a,b){var c={x:0,y:0};c=Array.isArray(a)?{x:a[0],y:a[1]}:"object"==typeof a?{x:a.x,y:a.y}:null!=a?{x:a,y:null!=b?b:a}:c;this.x=c.x;this.y=c.y},extend:{clone:function(){return new b.Point(this)},morph:function(a,c){return this.destination=new b.Point(a,c),this},at:function(a){return this.destination?new b.Point({x:this.x+(this.destination.x-this.x)*a,y:this.y+(this.destination.y-this.y)*a}):this},"native":function(){var a=b.parser["native"].createSVGPoint();return a.x=
this.x,a.y=this.y,a},transform:function(a){return new b.Point(this["native"]().matrixTransform(a["native"]()))}}});b.extend(b.Element,{point:function(a,c){return(new b.Point(a,c)).transform(this.screenCTM().inverse())}});b.extend(b.Element,{attr:function(a,c,d){if(null==a){a={};c=this.node.attributes;for(d=c.length-1;0<=d;d--)a[c[d].nodeName]=b.regex.isNumber.test(c[d].nodeValue)?parseFloat(c[d].nodeValue):c[d].nodeValue;return a}if("object"==typeof a)for(c in a)this.attr(c,a[c]);else if(null===c)this.node.removeAttribute(a);
else{if(null==c)return c=this.node.getAttribute(a),null==c?b.defaults.attrs[a]:b.regex.isNumber.test(c)?parseFloat(c):c;"stroke-width"==a?this.attr("stroke",0<parseFloat(c)?this._stroke:null):"stroke"==a&&(this._stroke=c);"fill"!=a&&"stroke"!=a||(b.regex.isImage.test(c)&&(c=this.doc().defs().image(c,0,0)),c instanceof b.Image&&(c=this.doc().defs().pattern(0,0,function(){this.add(c)})));"number"==typeof c?c=new b.Number(c):b.Color.isColor(c)?c=new b.Color(c):Array.isArray(c)&&(c=new b.Array(c));"leading"==
a?this.leading&&this.leading(c):"string"==typeof d?this.node.setAttributeNS(d,a,c.toString()):this.node.setAttribute(a,c.toString());!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,c)}return this}});b.extend(b.Element,{transform:function(a,c){var d;if("object"!=typeof a)return d=(new b.Matrix(this)).extract(),"string"==typeof a?d[a]:d;if(d=new b.Matrix(this),c=!!c||!!a.relative,null!=a.a)d=c?d.multiply(new b.Matrix(a)):new b.Matrix(a);else if(null!=a.rotation)p(a,this),d=c?d.rotate(a.rotation,
a.cx,a.cy):d.rotate(a.rotation-d.extract().rotation,a.cx,a.cy);else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(p(a,this),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,!c){var e=d.extract();a.scaleX=1*a.scaleX/e.scaleX;a.scaleY=1*a.scaleY/e.scaleY}d=d.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else null!=a.skew||null!=a.skewX||null!=a.skewY?((p(a,this),a.skewX=null!=a.skew?a.skew:null!=a.skewX?a.skewX:0,a.skewY=null!=a.skew?a.skew:
null!=a.skewY?a.skewY:0,c)||(e=d.extract(),d=d.multiply((new b.Matrix).skew(e.skewX,e.skewY,a.cx,a.cy).inverse())),d=d.skew(a.skewX,a.skewY,a.cx,a.cy)):a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?this.bbox()["c"+a.flip]:a.offset:null==a.offset?(e=this.bbox(),a.flip=e.cx,a.offset=e.cy):a.flip=a.offset,d=(new b.Matrix).flip(a.flip,a.offset)):null==a.x&&null==a.y||(c?d=d.translate(a.x,a.y):(null!=a.x&&(d.e=a.x),null!=a.y&&(d.f=a.y)));return this.attr("transform",d)}});b.extend(b.FX,{transform:function(a,
c){var d,e,f=this.target();return"object"!=typeof a?(d=(new b.Matrix(f)).extract(),"string"==typeof a?d[a]:d):(c=!!c||!!a.relative,null!=a.a?d=new b.Matrix(a):null!=a.rotation?(p(a,f),d=new b.Rotate(a.rotation,a.cx,a.cy)):null!=a.scale||null!=a.scaleX||null!=a.scaleY?(p(a,f),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,d=new b.Scale(a.scaleX,a.scaleY,a.cx,a.cy)):null!=a.skewX||null!=a.skewY?(p(a,f),a.skewX=null!=a.skewX?a.skewX:
0,a.skewY=null!=a.skewY?a.skewY:0,d=new b.Skew(a.skewX,a.skewY,a.cx,a.cy)):a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?f.bbox()["c"+a.flip]:a.offset:null==a.offset?(e=f.bbox(),a.flip=e.cx,a.offset=e.cy):a.flip=a.offset,d=(new b.Matrix).flip(a.flip,a.offset)):null==a.x&&null==a.y||(d=new b.Translate(a.x,a.y)),d?(d.relative=c,this.last().transforms.push(d),this._callStart()):this)}});b.extend(b.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||
"").split(b.regex.transforms).slice(0,-1).map(function(a){a=a.trim().split("(");return[a[0],a[1].split(b.regex.delimiter).map(function(a){return parseFloat(a)})]}).reduce(function(a,b){return"matrix"==b[0]?a.multiply(u(b[1])):a[b[0]].apply(a,b[1])},new b.Matrix)},toParent:function(a){if(this==a)return this;var b=this.screenCTM(),d=a.screenCTM().inverse();return this.addTo(a).untransform().transform(d.multiply(b)),this},toDoc:function(){return this.toParent(this.doc())}});b.Transformation=b.invent({create:function(a,
b){if(1<arguments.length&&"boolean"!=typeof b)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(a))for(var c=0,e=this.arguments.length;c<e;++c)this[this.arguments[c]]=a[c];else if("object"==typeof a)for(c=0,e=this.arguments.length;c<e;++c)this[this.arguments[c]]=a[this.arguments[c]];this.inversed=!1;!0===b&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(a){for(var c=[],d=0,e=this.arguments.length;d<e;++d)c.push(this[this.arguments[d]]);d=this._undo||new b.Matrix;
return d=(new b.Matrix).morph(b.Matrix.prototype[this.method].apply(d,c)).at(a),this.inversed?d.inverse():d},undo:function(a){for(var c=0,d=this.arguments.length;c<d;++c)a[this.arguments[c]]=void 0===this[this.arguments[c]]?0:a[this.arguments[c]];return a.cx=this.cx,a.cy=this.cy,this._undo=(new (b[x(this.method)])(a,!0)).at(1),this}}});b.Translate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX",
"transformedY"],method:"translate"}});b.Rotate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(a){a=(new b.Matrix).rotate((new b.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(a),this.cx,this.cy);return this.inversed?a.inverse():a},undo:function(a){return this._undo=a,this}}});b.Scale=b.invent({parent:b.Matrix,inherit:b.Transformation,
create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}});b.Skew=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}});b.extend(b.Element,{style:function(a,c){if(0==arguments.length)return this.node.style.cssText||"";if(2>arguments.length)if("object"==typeof a)for(c in a)this.style(c,
a[c]);else{if(!b.regex.isCss.test(a))return this.node.style[E(a)];for(a=a.split(/\s*;\s*/).filter(function(a){return!!a}).map(function(a){return a.split(/\s*:\s*/)});c=a.pop();)this.style(c[0],c[1])}else this.node.style[E(a)]=null===c||b.regex.isBlank.test(c)?"":c;return this}});b.Parent=b.invent({create:function(a){this.constructor.call(this,a)},inherit:b.Element,extend:{children:function(){return b.utils.map(b.utils.filterSVGElements(this.node.childNodes),function(a){return b.adopt(a)})},add:function(a,
b){return null==b?this.node.appendChild(a.node):a.node!=this.node.childNodes[b]&&this.node.insertBefore(a.node,this.node.childNodes[b]),this},put:function(a,b){return this.add(a,b),a},has:function(a){return 0<=this.index(a)},index:function(a){return[].slice.call(this.node.childNodes).indexOf(a.node)},get:function(a){return b.adopt(this.node.childNodes[a])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(a,c){var d,e=this.children(),
f=0;for(d=e.length;f<d;f++)e[f]instanceof b.Element&&a.apply(e[f],[f,e]),c&&e[f]instanceof b.Container&&e[f].each(a,c);return this},removeElement:function(a){return this.node.removeChild(a.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}});b.extend(b.Parent,{ungroup:function(a,c){return 0===c||this instanceof b.Defs||this.node==b.parser.draw?this:(a=a||(this instanceof b.Doc?
this:this.parent(b.Parent)),c=c||1/0,this.each(function(){return this instanceof b.Defs?this:this instanceof b.Parent?this.ungroup(a,c-1):this.toParent(a)}),this.node.firstChild||this.remove(),this)},flatten:function(a,b){return this.ungroup(a,b)}});b.Container=b.invent({create:function(a){this.constructor.call(this,a)},inherit:b.Parent});b.ViewBox=b.invent({create:function(a){var c,d,e,f=[0,0,0,0],g=1,k=1,m=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(a instanceof b.Element){var h=f=a,v=(a.attr("viewBox")||
"").match(m);a.bbox;m=new b.Number(a.width());for(e=new b.Number(a.height());"%"==m.unit;)g*=m.value,m=new b.Number(f instanceof b.Doc?f.parent().offsetWidth:f.parent().width()),f=f.parent();for(;"%"==e.unit;)k*=e.value,e=new b.Number(h instanceof b.Doc?h.parent().offsetHeight:h.parent().height()),h=h.parent();this.y=this.x=0;this.width=m*g;this.height=e*k;this.zoom=1;v&&(c=parseFloat(v[0]),d=parseFloat(v[1]),m=parseFloat(v[2]),e=parseFloat(v[3]),this.zoom=this.width/this.height>m/e?this.height/e:
this.width/m,this.x=c,this.y=d,this.width=m,this.height=e)}else a="string"==typeof a?a.match(m).map(function(a){return parseFloat(a)}):Array.isArray(a)?a:"object"==typeof a?[a.x,a.y,a.width,a.height]:4==arguments.length?[].slice.call(arguments):f,this.x=a[0],this.y=a[1],this.width=a[2],this.height=a[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(a,c,d,e){return this.destination=new b.ViewBox(a,c,d,e),this},at:function(a){return this.destination?
new b.ViewBox([this.x+(this.destination.x-this.x)*a,this.y+(this.destination.y-this.y)*a,this.width+(this.destination.width-this.width)*a,this.height+(this.destination.height-this.height)*a]):this}},parent:b.Container,construct:{viewbox:function(a,c,d,e){return 0==arguments.length?new b.ViewBox(this):this.attr("viewBox",new b.ViewBox(a,c,d,e))}}});"click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave touchstart touchmove touchleave touchend touchcancel".split(" ").forEach(function(a){b.Element.prototype[a]=
function(c){return null==c?b.off(this,a):b.on(this,a,c),this}});b.listenerId=0;b.on=function(a,c,d,e,f){var g=d.bind(e||a),h=a instanceof b.Element?a.node:a;h.instance=h.instance||{_events:{}};var m=h.instance._events;d._svgjsListenerId||(d._svgjsListenerId=++b.listenerId);c.split(b.regex.delimiter).forEach(function(a){var b=a.split(".")[0];a=a.split(".")[1]||"*";m[b]=m[b]||{};m[b][a]=m[b][a]||{};m[b][a][d._svgjsListenerId]=g;h.addEventListener(b,g,f||!1)})};b.off=function(a,c,d,e){var f=a instanceof
b.Element?a.node:a;if(f.instance&&("function"!=typeof d||(d=d._svgjsListenerId))){var g=f.instance._events;(c||"").split(b.regex.delimiter).forEach(function(a){var c,h,k=a&&a.split(".")[0],l=a&&a.split(".")[1];if(d)g[k]&&g[k][l||"*"]&&(f.removeEventListener(k,g[k][l||"*"][d],e||!1),delete g[k][l||"*"][d]);else if(k&&l){if(g[k]&&g[k][l]){for(h in g[k][l])b.off(f,[k,l].join("."),h);delete g[k][l]}}else if(l)for(a in g)for(c in g[a])l===c&&b.off(f,[a,l].join("."));else if(k){if(g[k]){for(c in g[k])b.off(f,
[k,c].join("."));delete g[k]}}else{for(a in g)b.off(f,a);f.instance._events={}}})}};b.extend(b.Element,{on:function(a,c,d,e){return b.on(this,a,c,d,e),this},off:function(a,c){return b.off(this.node,a,c),this},fire:function(a,c){return a instanceof h.Event?this.node.dispatchEvent(a):this.node.dispatchEvent(a=new b.CustomEvent(a,{detail:c,cancelable:!0})),this._event=a,this},event:function(){return this._event}});b.Defs=b.invent({create:"defs",inherit:b.Container});b.G=b.invent({create:"g",inherit:b.Container,
extend:{x:function(a){return null==a?this.transform("x"):this.transform({x:a-this.x()},!0)},y:function(a){return null==a?this.transform("y"):this.transform({y:a-this.y()},!0)},cx:function(a){return null==a?this.gbox().cx:this.x(a-this.gbox().width/2)},cy:function(a){return null==a?this.gbox().cy:this.y(a-this.gbox().height/2)},gbox:function(){var a=this.bbox(),b=this.transform();return a.x+=b.x,a.x2+=b.x,a.cx+=b.x,a.y+=b.y,a.y2+=b.y,a.cy+=b.y,a}},construct:{group:function(){return this.put(new b.G)}}});
b.Doc=b.invent({create:function(a){a&&(a="string"==typeof a?l.getElementById(a):a,"svg"==a.nodeName?this.constructor.call(this,a):(this.constructor.call(this,b.create("svg")),a.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:b.Container,extend:{namespace:function(){return this.attr({xmlns:b.ns,version:"1.1"}).attr("xmlns:xlink",b.xlink,b.xmlns).attr("xmlns:svgjs",b.svgjs,b.xmlns)},defs:function(){if(!this._defs){var a;(a=this.node.getElementsByTagName("defs")[0])?
this._defs=b.adopt(a):this._defs=new b.Defs;this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var a=this.node.getScreenCTM();return a&&this.style("left",-a.e%1+"px").style("top",-a.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);
return delete this._defs,b.parser.draw.parentNode||this.node.appendChild(b.parser.draw),this},clone:function(a){this.writeDataToDom();var b=this.node,d=A(b.cloneNode(!0));return a?(a.node||a).appendChild(d.node):b.parentNode.insertBefore(d.node,b.nextSibling),d}}});b.extend(b.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-
1]},forward:function(){var a=this.position()+1,c=this.parent();return c.removeElement(this).add(this,a),c instanceof b.Doc&&c.node.appendChild(c.defs().node),this},backward:function(){var a=this.position();return 0<a&&this.parent().removeElement(this).add(this,a-1),this},front:function(){var a=this.parent();return a.node.appendChild(this.node),a instanceof b.Doc&&a.node.appendChild(a.defs().node),this},back:function(){return 0<this.position()&&this.parent().removeElement(this).add(this,0),this},before:function(a){a.remove();
var b=this.position();return this.parent().add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent().add(a,b+1),this}});b.Mask=b.invent({create:function(){this.constructor.call(this,b.create("mask"));this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var a=this.targets.length-1;0<=a;a--)this.targets[a]&&this.targets[a].unmask();return this.targets=[],b.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new b.Mask)}}});
b.extend(b.Element,{maskWith:function(a){return this.masker=a instanceof b.Mask?a:this.parent().mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}});b.ClipPath=b.invent({create:function(){this.constructor.call(this,b.create("clipPath"));this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var a=this.targets.length-1;0<=a;a--)this.targets[a]&&this.targets[a].unclip();
return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new b.ClipPath)}}});b.extend(b.Element,{clipWith:function(a){return this.clipper=a instanceof b.ClipPath?a:this.parent().clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}});b.Gradient=b.invent({create:function(a){this.constructor.call(this,b.create(a+"Gradient"));
this.type=a},inherit:b.Container,extend:{at:function(a,c,d){return this.put(new b.Stop).update(a,c,d)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(a,c,d){return"transform"==a&&(a="gradientTransform"),b.Container.prototype.attr.call(this,a,c,d)}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}});b.extend(b.Gradient,b.FX,{from:function(a,c){return"radial"==
(this._target||this).type?this.attr({fx:new b.Number(a),fy:new b.Number(c)}):this.attr({x1:new b.Number(a),y1:new b.Number(c)})},to:function(a,c){return"radial"==(this._target||this).type?this.attr({cx:new b.Number(a),cy:new b.Number(c)}):this.attr({x2:new b.Number(a),y2:new b.Number(c)})}});b.extend(b.Defs,{gradient:function(a,c){return this.put(new b.Gradient(a)).update(c)}});b.Stop=b.invent({create:"stop",inherit:b.Element,extend:{update:function(a,c,d){return("number"==typeof a||a instanceof b.Number)&&
(a={offset:a,color:c,opacity:d}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new b.Number(a.offset)),this}}});b.Pattern=b.invent({create:"pattern",inherit:b.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()},attr:function(a,c,d){return"transform"==a&&(a="patternTransform"),
b.Container.prototype.attr.call(this,a,c,d)}},construct:{pattern:function(a,b,d){return this.defs().pattern(a,b,d)}}});b.extend(b.Defs,{pattern:function(a,c,d){return this.put(new b.Pattern).update(d).attr({x:0,y:0,width:a,height:c,patternUnits:"userSpaceOnUse"})}});b.Shape=b.invent({create:function(a){this.constructor.call(this,a)},inherit:b.Element});b.Bare=b.invent({create:function(a,c){if(this.constructor.call(this,b.create(a)),c)for(var d in c.prototype)"function"==typeof c.prototype[d]&&(this[d]=
c.prototype[d])},inherit:b.Element,extend:{words:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(l.createTextNode(a)),this}}});b.extend(b.Parent,{element:function(a,c){return this.put(new b.Bare(a,c))}});b.Symbol=b.invent({create:"symbol",inherit:b.Container,construct:{symbol:function(){return this.put(new b.Symbol)}}});b.Use=b.invent({create:"use",inherit:b.Shape,extend:{element:function(a,c){return this.attr("href",(c||"")+"#"+
a,b.xlink)}},construct:{use:function(a,c){return this.put(new b.Use).element(a,c)}}});b.Rect=b.invent({create:"rect",inherit:b.Shape,construct:{rect:function(a,c){return this.put(new b.Rect).size(a,c)}}});b.Circle=b.invent({create:"circle",inherit:b.Shape,construct:{circle:function(a){return this.put(new b.Circle).rx((new b.Number(a)).divide(2)).move(0,0)}}});b.extend(b.Circle,b.FX,{rx:function(a){return this.attr("r",a)},ry:function(a){return this.rx(a)}});b.Ellipse=b.invent({create:"ellipse",inherit:b.Shape,
construct:{ellipse:function(a,c){return this.put(new b.Ellipse).size(a,c).move(0,0)}}});b.extend(b.Ellipse,b.Rect,b.FX,{rx:function(a){return this.attr("rx",a)},ry:function(a){return this.attr("ry",a)}});b.extend(b.Circle,b.Ellipse,{x:function(a){return null==a?this.cx()-this.rx():this.cx(a+this.rx())},y:function(a){return null==a?this.cy()-this.ry():this.cy(a+this.ry())},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",
a)},width:function(a){return null==a?2*this.rx():this.rx((new b.Number(a)).divide(2))},height:function(a){return null==a?2*this.ry():this.ry((new b.Number(a)).divide(2))},size:function(a,c){var d=t(this,a,c);return this.rx((new b.Number(d.width)).divide(2)).ry((new b.Number(d.height)).divide(2))}});b.Line=b.invent({create:"line",inherit:b.Shape,extend:{array:function(){return new b.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,c,d,e){return null==
a?this.array():(a=void 0!==c?{x1:a,y1:c,x2:d,y2:e}:(new b.PointArray(a)).toLine(),this.attr(a))},move:function(a,b){return this.attr(this.array().move(a,b).toLine())},size:function(a,b){var c=t(this,a,b);return this.attr(this.array().size(c.width,c.height).toLine())}},construct:{line:function(a,c,d,e){return b.Line.prototype.plot.apply(this.put(new b.Line),null!=a?[a,c,d,e]:[0,0,0,0])}}});b.Polyline=b.invent({create:"polyline",inherit:b.Shape,construct:{polyline:function(a){return this.put(new b.Polyline).plot(a||
new b.PointArray)}}});b.Polygon=b.invent({create:"polygon",inherit:b.Shape,construct:{polygon:function(a){return this.put(new b.Polygon).plot(a||new b.PointArray)}}});b.extend(b.Polyline,b.Polygon,{array:function(){return this._array||(this._array=new b.PointArray(this.attr("points")))},plot:function(a){return null==a?this.array():this.clear().attr("points","string"==typeof a?a:this._array=new b.PointArray(a))},clear:function(){return delete this._array,this},move:function(a,b){return this.attr("points",
this.array().move(a,b))},size:function(a,b){var c=t(this,a,b);return this.attr("points",this.array().size(c.width,c.height))}});b.extend(b.Line,b.Polyline,b.Polygon,{morphArray:b.PointArray,x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)}});b.Path=
b.invent({create:"path",inherit:b.Shape,extend:{morphArray:b.PathArray,array:function(){return this._array||(this._array=new b.PathArray(this.attr("d")))},plot:function(a){return null==a?this.array():this.clear().attr("d","string"==typeof a?a:this._array=new b.PathArray(a))},clear:function(){return delete this._array,this},move:function(a,b){return this.attr("d",this.array().move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:
this.move(this.bbox().x,a)},size:function(a,b){var c=t(this,a,b);return this.attr("d",this.array().size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new b.Path).plot(a||new b.PathArray)}}});b.Image=b.invent({create:"image",inherit:b.Shape,extend:{load:function(a){if(!a)return this;var c=this,d=new h.Image;return b.on(d,
"load",function(){b.off(d);var e=c.parent(b.Pattern);null!==e&&(0==c.width()&&0==c.height()&&c.size(d.width,d.height),e&&0==e.width()&&0==e.height()&&e.size(c.width(),c.height()),"function"==typeof c._loaded&&c._loaded.call(c,{width:d.width,height:d.height,ratio:d.width/d.height,url:a}))}),b.on(d,"error",function(a){b.off(d);"function"==typeof c._error&&c._error.call(c,a)}),this.attr("href",d.src=this.src=a,b.xlink)},loaded:function(a){return this._loaded=a,this},error:function(a){return this._error=
a,this}},construct:{image:function(a,c,d){return this.put(new b.Image).load(a).size(c||0,d||c||0)}}});b.Text=b.invent({create:function(){this.constructor.call(this,b.create("text"));this.dom.leading=new b.Number(1.3);this._rebuild=!0;this._build=!1;this.attr("font-family",b.defaults.attrs["font-family"])},inherit:b.Shape,extend:{x:function(a){return null==a?this.attr("x"):this.attr("x",a)},y:function(a){var b=this.attr("y"),d="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?
b-d:b:this.attr("y","number"==typeof a.valueOf()?a+d:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function(a){if(void 0===a){a="";for(var c=this.node.childNodes,d=0,e=c.length;d<e;++d)0!=d&&3!=c[d].nodeType&&1==b.adopt(c[d]).dom.newLined&&(a+="\n"),a+=c[d].textContent;return a}if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else for(a=a.split("\n"),d=0,c=a.length;d<
c;d++)this.tspan(a[d]).newLine();return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this.dom.leading:(this.dom.leading=new b.Number(a),this.rebuild())},lines:function(){var a=(this.textPath&&this.textPath()||this).node;a=b.utils.map(b.utils.filterSVGElements(a.childNodes),function(a){return b.adopt(a)});return new b.Set(a)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var c=this,d=0,e=this.dom.leading*
new b.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(c.textPath()||this.attr("x",c.attr("x")),"\n"==this.text()?d+=e:(this.attr("dy",e+d),d=0))});this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this},setData:function(a){return this.dom=a,this.dom.leading=new b.Number(a.leading||1.3),this}},construct:{text:function(a){return this.put(new b.Text).text(a)},plain:function(a){return this.put(new b.Text).plain(a)}}});b.Tspan=b.invent({create:"tspan",
inherit:b.Shape,extend:{text:function(a){return null==a?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof a?a.call(this,this):this.plain(a),this)},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.parent(b.Text);return this.dom.newLined=!0,this.dy(a.dom.leading*a.attr("font-size")).attr("x",a.x())}}});b.extend(b.Text,b.Tspan,{plain:function(a){return!1===this._build&&this.clear(),this.node.appendChild(l.createTextNode(a)),
this},tspan:function(a){var c=(this.textPath&&this.textPath()||this).node,d=new b.Tspan;return!1===this._build&&this.clear(),c.appendChild(d.node),d.text(a)},clear:function(){for(var a=(this.textPath&&this.textPath()||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this},length:function(){return this.node.getComputedTextLength()}});b.TextPath=b.invent({create:"textPath",inherit:b.Parent,parent:b.Text,construct:{morphArray:b.PathArray,path:function(a){var c=new b.TextPath;for(a=this.doc().defs().path(a);this.node.hasChildNodes();)c.node.appendChild(this.node.firstChild);
return this.node.appendChild(c.node),c.attr("href","#"+a,b.xlink),this},array:function(){var a=this.track();return a?a.array():null},plot:function(a){var b=this.track(),d=null;return b&&(d=b.plot(a)),null==a?d:this},track:function(){var a=this.textPath();if(a)return a.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return b.adopt(this.node.firstChild)}}});b.Nested=b.invent({create:function(){this.constructor.call(this,b.create("svg"));this.style("overflow",
"visible")},inherit:b.Container,construct:{nested:function(){return this.put(new b.Nested)}}});b.A=b.invent({create:"a",inherit:b.Container,extend:{to:function(a){return this.attr("href",a,b.xlink)},show:function(a){return this.attr("show",a,b.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new b.A).to(a)}}});b.extend(b.Element,{linkTo:function(a){var c=new b.A;return"function"==typeof a?a.call(c,c):c.to(a),this.parent().put(c).put(this)}});b.Marker=
b.invent({create:"marker",inherit:b.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,d){return this.defs().marker(a,b,d)}}});b.extend(b.Defs,{marker:function(a,c,d){return this.put(new b.Marker).size(a,
c).ref(a/2,c/2).viewbox(0,0,a,c).attr("orient","auto").update(d)}});b.extend(b.Line,b.Polyline,b.Polygon,b.Path,{marker:function(a,c,d,e){var f=["marker"];return"all"!=a&&f.push(a),f=f.join("-"),a=c instanceof b.Marker?c:this.doc().marker(c,d,e),this.attr(f,a)}});var w={stroke:"color width opacity linecap linejoin miterlimit dasharray dashoffset".split(" "),fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};["fill","stroke"].forEach(function(a){var c,d={};d[a]=function(d){if(void 0===
d)return this;if("string"==typeof d||b.Color.isRgb(d)||d&&"function"==typeof d.fill)this.attr(a,d);else for(c=w[a].length-1;0<=c;c--)null!=d[w[a][c]]&&this.attr(w.prefix(a,w[a][c]),d[w[a][c]]);return this};b.extend(b.Element,b.FX,d)});b.extend(b.Element,b.FX,{rotate:function(a,b,d){return this.transform({rotation:a,cx:b,cy:d})},skew:function(a,b,d,e){return 1==arguments.length||3==arguments.length?this.transform({skew:a,cx:b,cy:d}):this.transform({skewX:a,skewY:b,cx:d,cy:e})},scale:function(a,b,d,
e){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:b,cy:d}):this.transform({scaleX:a,scaleY:b,cx:d,cy:e})},translate:function(a,b){return this.transform({x:a,y:b})},flip:function(a,b){return b="number"==typeof a?a:b,this.transform({flip:a||"both",offset:b})},matrix:function(a){return this.attr("transform",new b.Matrix(6==arguments.length?[].slice.call(arguments):a))},opacity:function(a){return this.attr("opacity",a)},dx:function(a){return this.x((new b.Number(a)).plus(this instanceof
b.FX?0:this.x()),!0)},dy:function(a){return this.y((new b.Number(a)).plus(this instanceof b.FX?0:this.y()),!0)},dmove:function(a,b){return this.dx(a).dy(b)}});b.extend(b.Rect,b.Ellipse,b.Circle,b.Gradient,b.FX,{radius:function(a,c){var d=(this._target||this).type;return"radial"==d||"circle"==d?this.attr("r",new b.Number(a)):this.rx(a).ry(null==c?a:c)}});b.extend(b.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}});b.extend(b.Parent,
b.Text,b.Tspan,b.FX,{font:function(a,b){if("object"==typeof a)for(b in a)this.font(b,a[b]);return"leading"==a?this.leading(b):"anchor"==a?this.attr("text-anchor",b):"size"==a||"family"==a||"weight"==a||"stretch"==a||"variant"==a||"style"==a?this.attr("font-"+a,b):this.attr(a,b)}});b.Set=b.invent({create:function(a){a instanceof b.Set?this.members=a.members.slice():Array.isArray(a)?this.members=a:this.clear()},extend:{add:function(){var a,b=[].slice.call(arguments),d=0;for(a=b.length;d<a;d++)this.members.push(b[d]);
return this},remove:function(a){a=this.index(a);return-1<a&&this.members.splice(a,1),this},each:function(a){for(var b=0,d=this.members.length;b<d;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(a){return 0<=this.index(a)},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-
1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new b.RBox;var a=this.members[0].rbox(this.members[0].doc());return this.each(function(){a=a.merge(this.rbox(this.doc()))}),a}},construct:{set:function(a){return new b.Set(a)}}});b.FX.Set=b.invent({create:function(a){this.set=a}});b.Set.inherit=function(){var a,c=[];for(a in b.Shape.prototype)"function"==typeof b.Shape.prototype[a]&&"function"!=typeof b.Set.prototype[a]&&c.push(a);c.forEach(function(a){b.Set.prototype[a]=
function(){for(var c=0,d=this.members.length;c<d;c++)this.members[c]&&"function"==typeof this.members[c][a]&&this.members[c][a].apply(this.members[c],arguments);return"animate"==a?this.fx||(this.fx=new b.FX.Set(this)):this}});c=[];for(a in b.FX.prototype)"function"==typeof b.FX.prototype[a]&&"function"!=typeof b.FX.Set.prototype[a]&&c.push(a);c.forEach(function(a){b.FX.Set.prototype[a]=function(){for(var b=0,c=this.set.members.length;b<c;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,
arguments);return this}})};b.extend(b.Element,{data:function(a,b,d){if("object"==typeof a)for(b in a)this.data(b,a[b]);else if(2>arguments.length)try{return JSON.parse(this.attr("data-"+a))}catch(e){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:!0===d||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}});b.extend(b.Element,{remember:function(a,b){if("object"==typeof arguments[0])for(b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];
this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;0<=a;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}});b.get=function(a){a=l.getElementById(I(a)||a);return b.adopt(a)};b.select=function(a,c){return new b.Set(b.utils.map((c||l).querySelectorAll(a),function(a){return b.adopt(a)}))};b.extend(b.Parent,{select:function(a){return b.select(a,this.node)}});var n="abcdef".split("");
"function"!=typeof h.CustomEvent?(r=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=l.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c},r.prototype=h.Event.prototype,b.CustomEvent=r):b.CustomEvent=h.CustomEvent;return function(a){for(var b=0,d=["moz","webkit"],e=0;e<d.length&&!h.requestAnimationFrame;++e)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"]||a[d[e]+"CancelRequestAnimationFrame"];
a.requestAnimationFrame=a.requestAnimationFrame||function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f};a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(h),b});